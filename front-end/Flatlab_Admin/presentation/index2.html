<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>Language distribution in different Australian cities</title>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id=0 style="height:400px; width: 33%"></div>
    <div id=1 style="height:400px; width: 33%"></div>
    <!-- ECharts单文件引入 -->
    <script src="echarts.common.min.js"></script>
    <script src="jquery-1.12.3.js"></script>
    <script type="text/javascript">
    // 基于准备好的dom，初始化echarts图表
//    $.get("http://0.0.0.0:8000",function(data){
//        var result = eval('(' + data + ')');
//        var charts = result.charts.slice(0,1)
//        for (i in charts){
//            // initialize the chart
//            var myChart = echarts.init(document.getElementById(i));
//            option = {
//                title : {
//                    text: charts[i].title,
//                    subtext: 'handsome Uncle9',
//                    x:'center'
//                },
//                tooltip : {
//                    trigger: 'item',
//                    formatter: "{a} <br/>{b} : {c} ({d}%)"
//                },
//                toolbox: {
//                    show : true,
//                    feature : {
//                    mark : {show: true},
//                    dataView : {show: true, readOnly: false},
//                    magicType : {
//                    show: true,
//                    type: ['pie', 'funnel']
//                },
//            restore : {show: true},
//            saveAsImage : {show: true}
//        }
//    },
//
//                legend: {
//                    orient: 'vertical',
//                    left: 'left',
//                    data: charts[i].names
//
//                },
//                series : [
//                    {
//                        name: result.title,
//                        type: charts[i].type,
//                        radius : '55%',
//                        center: ['50%', '60%'],
//                        data:charts[i].data,
//                        itemStyle: {
//                            emphasis: {
//                                shadowBlur: 10,
//                                shadowOffsetX: 0,
//                                shadowColor: 'rgba(0, 0, 0, 0.5)'
//                            }
//                        }
//                    }
//                ]
//            };
//            myChart.setOption(option);
//        };
//    });
        $.ajax({
            url:'http://115.146.89.147:8080/2',
            type:'get',
            dataType:'jsonp',
            success:function (data) {
                alert(data)
                var result = eval('(' + data + ')');
                var charts = result.charts.slice(0,1)
                for (i in charts){
                    // initialize the chart
                    var myChart = echarts.init(document.getElementById(i));
                    option = {
                        title : {
                            text: charts[i].title,
                            subtext: 'handsome Uncle9',
                            x:'center'
                        },
                        tooltip : {
                            trigger: 'item',
                            formatter: "{a} <br/>{b} : {c} ({d}%)"
                        },
                        toolbox: {
                            show : true,
                            feature : {
                                mark : {show: true},
                                dataView : {show: true, readOnly: false},
                                magicType : {
                                    show: true,
                                    type: ['pie', 'funnel']
                                },
                                restore : {show: true},
                                saveAsImage : {show: true}
                            }
                        },

                        legend: {
                            orient: 'vertical',
                            left: 'left',
                            data: charts[i].names

                        },
                        series : [
                            {
                                name: result.title,
                                type: charts[i].type,
                                radius : '55%',
                                center: ['50%', '60%'],
                                data:charts[i].data,
                                itemStyle: {
                                    emphasis: {
                                        shadowBlur: 10,
                                        shadowOffsetX: 0,
                                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                                    }
                                }
                            }
                        ]
                    };
                    myChart.setOption(option);
                };
            }
        })
        </script>
</body>
</html>